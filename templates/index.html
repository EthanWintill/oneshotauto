{% extends "base.html" %}

{% block title %}All Quotes - Body Work Quote Tracker{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">All Quotes</h2>

<div class="bg-white p-6 rounded-lg mb-8 shadow">
    <h3 class="mb-4 text-lg font-semibold">Search & Filter</h3>
    <form method="GET" action="{{ url_for('index') }}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="mb-4">
            <label for="quote_number" class="block mb-1 font-medium">Quote Number</label>
            <input type="text" id="quote_number" name="quote_number" value="{{ search_quote_number }}" class="w-full px-3 py-2 border border-border-gray rounded focus:outline-none focus:ring-2 focus:ring-primary-blue">
        </div>
        <div class="mb-4">
            <label for="vin" class="block mb-1 font-medium">VIN Number</label>
            <input type="text" id="vin" name="vin" value="{{ search_vin }}" class="w-full px-3 py-2 border border-border-gray rounded focus:outline-none focus:ring-2 focus:ring-primary-blue">
        </div>
        <div class="mb-4">
            <label for="make" class="block mb-1 font-medium">Make</label>
            <input type="text" id="make" name="make" value="{{ search_make }}" class="w-full px-3 py-2 border border-border-gray rounded focus:outline-none focus:ring-2 focus:ring-primary-blue">
        </div>
        <div class="mb-4">
            <label for="model" class="block mb-1 font-medium">Model</label>
            <input type="text" id="model" name="model" value="{{ search_model }}" class="w-full px-3 py-2 border border-border-gray rounded focus:outline-none focus:ring-2 focus:ring-primary-blue">
        </div>
        <div class="mb-4">
            <label for="date_from" class="block mb-1 font-medium">Date From</label>
            <input type="date" id="date_from" name="date_from" value="{{ search_date_from }}" class="w-full px-3 py-2 border border-border-gray rounded focus:outline-none focus:ring-2 focus:ring-primary-blue">
        </div>
        <div class="mb-4">
            <label for="date_to" class="block mb-1 font-medium">Date To</label>
            <input type="date" id="date_to" name="date_to" value="{{ search_date_to }}" class="w-full px-3 py-2 border border-border-gray rounded focus:outline-none focus:ring-2 focus:ring-primary-blue">
        </div>
        <div class="mb-4 flex items-end">
            <button type="submit" class="w-full bg-primary-blue hover:bg-primary-blue-hover text-white px-6 py-2 rounded transition cursor-pointer">Search</button>
        </div>
        <div class="mb-4 flex items-end">
            <a href="{{ url_for('index') }}" class="w-full bg-primary-blue hover:bg-primary-blue-hover text-white px-6 py-2 rounded text-center no-underline block transition">Clear</a>
        </div>
    </form>
</div>

<div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="w-full border-collapse">
        <thead>
            <tr class="bg-primary-dark text-white">
                <th class="py-4 px-4 text-left font-semibold">Quote #</th>
                <th class="py-4 px-4 text-left font-semibold">Date</th>
                <th class="py-4 px-4 text-left font-semibold">VIN</th>
                <th class="py-4 px-4 text-center font-semibold">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if quotes %}
                {% for quote in quotes %}
                <tr class="border-b border-border-gray hover:bg-gray-50 transition">
                    <td class="py-4 px-4">
                        <a href="{{ url_for('quote_detail', id=quote.id) }}" class="text-primary-blue hover:underline no-underline">{{ quote.quote_number }}</a>
                    </td>
                    <td class="py-4 px-4">{{ quote.date.strftime('%Y-%m-%d') if quote.date else '' }}</td>
                    <td class="py-4 px-4">{{ quote.vin_number }}</td>
                    <td class="py-4 px-4 text-center">
                        <a href="{{ url_for('quote_detail', id=quote.id) }}" class="text-primary-blue hover:underline no-underline mr-4">View/Edit</a>
                        <form method="POST" action="{{ url_for('delete_quote', id=quote.id) }}" class="inline" onsubmit="return confirm('Are you sure you want to delete this quote?');">
                            <button type="submit" class="bg-danger hover:bg-danger-hover text-white px-4 py-2 rounded text-sm transition">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="4" class="py-12 text-center text-gray-400">
                        No quotes found. <a href="{{ url_for('create_quote') }}" class="text-primary-blue hover:underline">Create your first quote</a>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
